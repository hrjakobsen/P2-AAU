% -*- root: ../../DAT2-A423_Project_Report.tex -*-
\clearpage
\section{Using Social Networks for Image Sharing}

To test the level of compression on different social networks, images encoded in different file formats was uploaded to multiple social networks. 
After begin uploaded, the compressed file was then again downloaded and examined.
To examine how much the compression algorithms distorted the images, the euclidean distance described in \cite{Wang2005} was calculated between the original image and the compressed version.
The results using images saved with JPEG encoding can be seen in table \ref{tab:JPEG-compression}. 

From the results we can clearly see that on JPEG images Twitter clearly compresses the file the most in terms of both file size and resolution.
Combined this results in a higher euclidean distance, as the image loses more information. 
On the other hand, the image sharing site Imgur changed nearly nothing in the uploaded JPEG image, and when downloaded again, all of the images reached an euclidean distance of 0, which means that the every pixel in the images were equal.

\begin{threeparttable}[]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{|p{1.7cm}|p{1.3cm}|p{1.9cm}|p{1.5cm}|p{1.3cm}|p{1.9cm}|p{1.5cm}|p{2cm}|}
\hline
               & \multicolumn{3}{c|}{Before compression}      & \multicolumn{3}{c|}{After compression}       &                    \\ \hline
Social \newline Network & Image format & Image \newline resolution & Image size & Image format & Image \newline resolution & Image size & Euclidean distance \\ \hline
Facebook       & jpg          & 3648x2432        & 2.33 MB    & jpg          & 2048x1365        & 149 KB     & 4884.1084\tnote{\textdagger}          \\ \hline
               & jpg          & 1824x1216        & 1.13 MB    & jpg          & 1824x1216        & 126 KB     & 2382.2316\tnote{\textdagger}          \\ \hline
               & jpg          & 912x608          & 369 KB     & jpg          & 912x608          & 44.5 KB    & 1672.1958          \\ \hline
Twitter        & jpg          & 3648x2432        & 2.33 MB    & jpg          & 1024x683         & 77.4 KB    & 8731.2981\tnote{\textdagger}          \\ \hline
               & jpg          & 1824x1216        & 1.13 MB    & jpg          & 1024x683         & 78.2 KB    & 3619.1192\tnote{\textdagger}          \\ \hline
               & jpg          & 912x608          & 369 KB     & jpg          & 912x608          & 65.4 KB    & 1280.3035          \\ \hline
Imgur          & jpg          & 3648x2432        & 2.33 MB    & jpg          & 3648x2432        & 2.32 MB    & 0                  \\ \hline
               & jpg          & 1824x1216        & 1.13 MB    & jpg          & 1824x1216        & 1.12 MB    & 0                  \\ \hline
               & jpg          & 912x608          & 369 KB     & jpg          & 912x608          & 355 KB     & 0                  \\ \hline
\end{tabular}
}
\begin{tablenotes}
    \footnotesize{\item[\textdagger] Image has been scaled to the original image size before calculating euclidean distance, which\\ may have skewed the results.}
    \end{tablenotes}
\caption{Social Network compression on JPEG}
\label{tab:JPEG-compression}
\end{threeparttable}

After the first initial tests of the compression systems used, the same test was run with images saved with PNG encoding.
This time however, embedded in the images using the least significant bit method described in section \ref{sec:lsb-implementation}, was a secret image. 
The results from these tests are shown in table \ref{tab:PNG-compression}.
From the result it is clear that being able to preserve all pixels, and with regards to the LSB method, all information is a rare occurrence when sharing images on social networking sites. In only two of the nine tested images the hidden image could be extracted. 
These images were the lowest in both resolution and file size, which shows that there exists a threshold for when the social networks compresses the uploaded images. 
Below these thresholds we can use the both Twitter and Imgur to send data without it being compressed. In the tests conducted the highest amount transferred was $912\text{ pixels} \cdot 608\text{ pixels} \cdot 3\text{ bytes/pixel} \cdot 2\text{ bits/byte} = 3.327\cdot 10^6\text{ bits}$ which is enough to save $415,872$ characters using their ASCII value.\\ 


\begin{threeparttable}[]
\centering
\resizebox{\textwidth}{!}{%
\begin{tabular}{|p{1.7cm}|p{1.3cm}|p{1.9cm}|p{1.5cm}|p{1.3cm}|p{1.9cm}|p{1.5cm}|p{2cm}|p{1.3cm}|}
\hline
               & \multicolumn{3}{c|}{Before compression}      & \multicolumn{3}{c|}{After compression}       &                    &                            \\ \hline
Social \newline Network & Image format & Image \newline resolution & Image size & Image format & Image \newline resolution & Image size & Euclidean distance & Extract \newline image? \\ \hline
Facebook       & png          & 3648x2432        & 18.1 MB    & jpg          & 2048x1365        & 152 KB     & 5935.8907\tnote{\textdagger}          & No                         \\ \hline
               & png          & 1824x1216        & 5.08 MB    & jpg          & 1824x1216        & 142 KB     & 2773.7082\tnote{\textdagger}          & No                         \\ \hline
               & png          & 912x608          & 1.35 MB    & jpg          & 912x608          & 49 KB      & 1774.8134          & No                         \\ \hline
Twitter        & png          & 3648x2432        & 18.1 MB    & png          & 1024x683         & 79.4 KB    & 9373.1348\tnote{\textdagger}          & No                         \\ \hline
               & png          & 1824x1216        & 5.08 MB    & png          & 1024x683         & 80.9 KB    & 4005.7118\tnote{\textdagger}          & No                         \\ \hline
               & png          & 912x608          & 1.35 MB    & png          & 912x608          & 1.02 MB    & 0                  & Yes                        \\ \hline
Imgur          & png          & 3648x2432        & 18.1 MB    & jpg          & 3648x2432        & 419 KB     & 4227.2989          & No                         \\ \hline
               & png          & 1824x1216        & 5.08 MB    & jpg          & 1824x1216        & 141 KB     & 2761.5206          & No                         \\ \hline
               & png          & 912x608          & 1.35 MB    & png          & 912x608          & 1.35 MB    & 0                  & Yes                        \\ \hline
\end{tabular}
}
\begin{tablenotes}
    \footnotesize{\item[\textdagger] Image has been scaled to the original image size before calculating euclidean distance, which\\ may have skewed the results.}
    \end{tablenotes}
\caption{Social Network compression on PNG}
\label{tab:PNG-compression}
\end{threeparttable}

From the tests conducted it is clear that when using social networks to share information embedded in conventional files, it is critical to understand how the social networking site processes the file, before serving it to the other users of the site.
Otherwise you can very easily end up with your data being scrambled beyond repair, and the secret message being lost.